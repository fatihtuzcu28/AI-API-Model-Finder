<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI API Model Finder & Tester</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .glass { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); }
        .spinner { border: 3px solid rgba(0, 0, 0, 0.1); border-left-color: #4f46e5; border-radius: 50%; width: 24px; height: 24px; animation: spin 1s linear infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }
        .copy-badge:active { transform: scale(0.95); }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .tab-active { border-bottom: 2px solid #4f46e5; color: #4f46e5; font-weight: 600; }
        
        /* Toggle Switch Style */
        .dot { transition: all 0.3s ease-in-out; }
        input:checked ~ .dot { transform: translateX(100%); background-color: #4f46e5; }
        input:checked ~ .block { background-color: #e0e7ff; }
    </style>
</head>
<body class="bg-slate-50 min-h-screen text-slate-900">

<div class="max-w-5xl mx-auto px-4 py-12">
    <!-- Language & Header -->
    <div class="flex justify-end mb-4">
        <button onclick="toggleLanguage()" id="langBtn" class="flex items-center gap-2 bg-white border border-slate-200 px-3 py-1.5 rounded-lg text-sm font-semibold hover:bg-slate-50 transition-all shadow-sm">
            <span id="langFlag">ðŸ‡ºðŸ‡¸</span>
            <span id="langText">English</span>
        </button>
    </div>

    <header class="text-center mb-8">
        <h1 id="ui-title" class="text-4xl font-bold text-indigo-600 mb-4 text-balance">AI API Model Bulucu</h1>
        <p id="ui-subtitle" class="text-slate-600 max-w-2xl mx-auto text-sm">9 farklÄ± platform iÃ§in API anahtarlarÄ±nÄ±zÄ± test edin, limitleri gÃ¶rÃ¼n ve Model ID'lerini kopyalayÄ±n.</p>
    </header>

    <!-- Platform Tabs -->
    <div class="flex justify-start md:justify-center border-b border-slate-200 mb-8 gap-2 overflow-x-auto no-scrollbar pb-1">
        <button onclick="setPlatform('gemini')" id="tab-gemini" class="py-2 px-4 tab-active transition-all whitespace-nowrap">Gemini</button>
        <button onclick="setPlatform('openai')" id="tab-openai" class="py-2 px-4 text-slate-500 hover:text-indigo-600 transition-all whitespace-nowrap">ChatGPT</button>
        <button onclick="setPlatform('huggingface')" id="tab-huggingface" class="py-2 px-4 text-slate-500 hover:text-indigo-600 transition-all whitespace-nowrap">Hugging Face</button>
        <button onclick="setPlatform('anthropic')" id="tab-anthropic" class="py-2 px-4 text-slate-500 hover:text-indigo-600 transition-all whitespace-nowrap">Claude</button>
        <button onclick="setPlatform('groq')" id="tab-groq" class="py-2 px-4 text-slate-500 hover:text-indigo-600 transition-all whitespace-nowrap">Groq</button>
        <button onclick="setPlatform('openrouter')" id="tab-openrouter" class="py-2 px-4 text-slate-500 hover:text-indigo-600 transition-all whitespace-nowrap">OpenRouter</button>
        <button onclick="setPlatform('deepseek')" id="tab-deepseek" class="py-2 px-4 text-slate-500 hover:text-indigo-600 transition-all whitespace-nowrap">DeepSeek</button>
        <button onclick="setPlatform('mistral')" id="tab-mistral" class="py-2 px-4 text-slate-500 hover:text-indigo-600 transition-all whitespace-nowrap">Mistral</button>
        <button onclick="setPlatform('perplexity')" id="tab-perplexity" class="py-2 px-4 text-slate-500 hover:text-indigo-600 transition-all whitespace-nowrap">Perplexity</button>
    </div>

    <!-- Input Section -->
    <div class="glass border border-slate-200 rounded-2xl p-6 shadow-xl mb-8">
        <div class="flex flex-col md:flex-row gap-4">
            <input type="password" id="apiKey" 
                placeholder="API AnahtarÄ±nÄ±zÄ± girin..." 
                class="flex-1 px-4 py-3 rounded-xl border border-slate-300 focus:ring-2 focus:ring-indigo-500 focus:outline-none transition-all">
            <button onclick="testKey()" id="btnTest"
                class="bg-indigo-600 hover:bg-indigo-700 text-white font-semibold px-8 py-3 rounded-xl transition-all flex items-center justify-center min-w-[180px]">
                <span id="btnText">Modelleri Listele</span>
                <div id="loader" class="spinner hidden ml-3 border-white/30 border-l-white"></div>
            </button>
        </div>
        <div class="flex items-center justify-center gap-2 mt-4 text-xs text-slate-400 italic">
            <span class="inline-block w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>
            <p id="platformNote" class="text-center">SeÃ§ili Platform: Gemini (Google AI Studio)</p>
        </div>
    </div>

    <!-- Filter Section -->
    <div id="filterSection" class="hidden mb-6 flex items-center justify-end px-2">
        <label for="freeFilter" class="flex items-center cursor-pointer select-none">
            <span id="ui-free-label" class="mr-3 text-sm font-medium text-slate-700">Sadece Ãœcretsiz (Free) Modeller</span>
            <div class="relative">
                <input type="checkbox" id="freeFilter" class="sr-only" onchange="applyFilters()">
                <div class="block bg-slate-200 w-10 h-6 rounded-full"></div>
                <div class="dot absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition"></div>
            </div>
        </label>
    </div>

    <!-- Results Section -->
    <div id="results" class="hidden space-y-4">
        <div id="statusMsg" class="p-4 rounded-xl text-center font-medium"></div>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4" id="modelList"></div>
    </div>

    <!-- Error Placeholder -->
    <div id="errorBox" class="hidden p-4 bg-red-50 border border-red-200 text-red-700 rounded-xl mb-8 flex items-center gap-3">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="shrink-0"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>
        <span id="errorText"></span>
    </div>
</div>

<script>
    let currentLang = 'tr';
    let currentPlatform = 'gemini';
    let allModels = [];

    const i18n = {
        tr: {
            title: "AI API Model Bulucu",
            subtitle: "9 farklÄ± platform iÃ§in API anahtarlarÄ±nÄ±zÄ± test edin, limitleri gÃ¶rÃ¼n ve Model ID'lerini kopyalayÄ±n.",
            inputPlaceholder: "API AnahtarÄ±nÄ±zÄ± girin...",
            btnList: "Modelleri Listele",
            btnTesting: "SorgulanÄ±yor...",
            freeOnly: "Sadece Ãœcretsiz (Free) Modeller",
            platformSelected: "SeÃ§ili Platform: ",
            errorEmpty: "LÃ¼tfen bir API anahtarÄ± girin.",
            errorAuth: "API AnahtarÄ± geÃ§ersiz veya yetkisiz.",
            errorCORS: "CORS politikasÄ± veya yanlÄ±ÅŸ anahtar olabilir",
            verified: "anahtarÄ± doÄŸrulandÄ±.",
            found: "model bulundu.",
            freeBadge: "Ãœcretsiz EriÅŸim",
            noModel: "Kriterlere uygun model bulunamadÄ±.",
            langFlag: "ðŸ‡ºðŸ‡¸",
            langName: "English"
        },
        en: {
            title: "AI API Model Finder",
            subtitle: "Test your API keys across 9 platforms, check limits, and copy Model IDs easily.",
            inputPlaceholder: "Enter your API key...",
            btnList: "List Models",
            btnTesting: "Querying...",
            freeOnly: "Free Models Only",
            platformSelected: "Selected Platform: ",
            errorEmpty: "Please enter an API key.",
            errorAuth: "Invalid or unauthorized API Key.",
            errorCORS: "Possible CORS policy issue or wrong key",
            verified: "key verified.",
            found: "models found.",
            freeBadge: "Free Access",
            noModel: "No models found matching criteria.",
            langFlag: "ðŸ‡¹ðŸ‡·",
            langName: "TÃ¼rkÃ§e"
        }
    };

    function toggleLanguage() {
        currentLang = currentLang === 'tr' ? 'en' : 'tr';
        updateUI();
    }

    function updateUI() {
        const lang = i18n[currentLang];
        document.getElementById('ui-title').textContent = lang.title;
        document.getElementById('ui-subtitle').textContent = lang.subtitle;
        document.getElementById('apiKey').placeholder = lang.inputPlaceholder;
        document.getElementById('btnText').textContent = lang.btnList;
        document.getElementById('ui-free-label').textContent = lang.freeOnly;
        document.getElementById('langFlag').textContent = lang.langFlag;
        document.getElementById('langText').textContent = lang.langName;
        
        // Update platform note
        const config = platforms[currentPlatform];
        document.getElementById('platformNote').textContent = lang.platformSelected + config.name;
        
        // Refresh results if visible
        if (!document.getElementById('results').classList.contains('hidden')) {
            applyFilters();
        }
    }

    const platforms = {
        gemini: { name: 'Gemini', url: (key) => `https://generativelanguage.googleapis.com/v1beta/models?key=${key}`, headers: (key) => ({}) },
        openai: { name: 'ChatGPT', url: () => `https://api.openai.com/v1/models`, headers: (key) => ({ 'Authorization': `Bearer ${key}` }) },
        huggingface: { name: 'Hugging Face', url: () => `https://huggingface.co/api/whoami-v2`, headers: (key) => ({ 'Authorization': `Bearer ${key}` }) },
        anthropic: { name: 'Anthropic', url: () => `https://api.anthropic.com/v1/models`, headers: (key) => ({ 'x-api-key': key, 'anthropic-version': '2023-06-01', 'content-type': 'application/json' }) },
        groq: { name: 'Groq', url: () => `https://api.groq.com/openai/v1/models`, headers: (key) => ({ 'Authorization': `Bearer ${key}` }) },
        openrouter: { name: 'OpenRouter', url: () => `https://openrouter.ai/api/v1/models`, headers: (key) => ({ 'Authorization': `Bearer ${key}` }) },
        deepseek: { name: 'DeepSeek', url: () => `https://api.deepseek.com/models`, headers: (key) => ({ 'Authorization': `Bearer ${key}` }) },
        mistral: { name: 'Mistral', url: () => `https://api.mistral.ai/v1/models`, headers: (key) => ({ 'Authorization': `Bearer ${key}` }) },
        perplexity: { name: 'Perplexity', url: () => `https://api.perplexity.ai/models`, headers: (key) => ({ 'Authorization': `Bearer ${key}` }) }
    };

    function setPlatform(p) {
        currentPlatform = p;
        allModels = [];
        document.querySelectorAll('[id^="tab-"]').forEach(btn => btn.classList.remove('tab-active', 'text-slate-500'));
        document.getElementById(`tab-${p}`).classList.add('tab-active');
        document.getElementById('platformNote').textContent = i18n[currentLang].platformSelected + platforms[p].name;
        document.getElementById('results').classList.add('hidden');
        document.getElementById('errorBox').classList.add('hidden');
        document.getElementById('filterSection').classList.add('hidden');
        document.getElementById('freeFilter').checked = false;
    }

    async function testKey() {
        const apiKey = document.getElementById('apiKey').value.trim();
        const btn = document.getElementById('btnTest');
        const btnText = document.getElementById('btnText');
        const loader = document.getElementById('loader');
        const errorBox = document.getElementById('errorBox');
        const lang = i18n[currentLang];

        if (!apiKey) {
            showError(lang.errorEmpty);
            return;
        }

        errorBox.classList.add('hidden');
        btn.disabled = true;
        btnText.textContent = lang.btnTesting;
        loader.classList.remove('hidden');

        try {
            const config = platforms[currentPlatform];
            const response = await fetch(config.url(apiKey), { headers: config.headers(apiKey) });
            
            if (response.status === 401 || response.status === 403) throw new Error(lang.errorAuth);

            const data = await response.json();
            if (data.error) throw new Error(typeof data.error === 'string' ? data.error : (data.error.message || "Error"));

            if (currentPlatform === 'gemini') {
                allModels = data.models || [];
            } else if (currentPlatform === 'anthropic') {
                allModels = data.data || [];
            } else if (currentPlatform === 'huggingface') {
                allModels = [
                    { id: "meta-llama/Llama-3.1-8B-Instruct", name: "Llama 3.1 8B", isFree: true },
                    { id: "mistralai/Mistral-7B-v0.1", name: "Mistral 7B", isFree: true },
                    { id: "google/gemma-2-9b-it", name: "Gemma 2 9B", isFree: true },
                    { id: "microsoft/Phi-3-mini-4k-instruct", name: "Phi-3 Mini", isFree: true }
                ];
            } else if (currentPlatform === 'openrouter') {
                allModels = (data.data || []).map(m => ({
                    ...m,
                    isFree: m.id.includes(':free') || (m.pricing && parseFloat(m.pricing.prompt) === 0)
                }));
            } else {
                allModels = data.data || data.models || []; 
            }

            if (allModels.length > 0) {
                document.getElementById('results').classList.remove('hidden');
                document.getElementById('statusMsg').className = "p-4 rounded-xl text-center font-medium bg-green-50 text-green-700 border border-green-200 mb-6";
                document.getElementById('statusMsg').textContent = `${config.name} ${lang.verified} ${allModels.length} ${lang.found}`;
                
                if (currentPlatform === 'openrouter' || currentPlatform === 'huggingface' || allModels.some(m => m.isFree)) {
                    document.getElementById('filterSection').classList.remove('hidden');
                }
                applyFilters();
            } else {
                showError("No models found.");
            }
        } catch (err) {
            showError(`${err.message} (${lang.errorCORS})`);
        } finally {
            btn.disabled = false;
            btnText.textContent = lang.btnList;
            loader.classList.add('hidden');
        }
    }

    function applyFilters() {
        const isFreeOnly = document.getElementById('freeFilter').checked;
        const modelList = document.getElementById('modelList');
        const lang = i18n[currentLang];
        modelList.innerHTML = '';

        const filteredModels = isFreeOnly 
            ? allModels.filter(m => m.isFree || (m.id && m.id.toLowerCase().includes('free'))) 
            : allModels;

        if (filteredModels.length === 0) {
            modelList.innerHTML = `<div class="col-span-full py-8 text-center text-slate-400 italic">${lang.noModel}</div>`;
            return;
        }

        filteredModels.forEach(m => {
            const card = document.createElement('div');
            card.className = "bg-white border border-slate-200 p-4 rounded-xl shadow-sm hover:shadow-md transition-all flex flex-col justify-between hover:border-indigo-200 group relative overflow-hidden";
            const modelId = m.id || (m.name ? m.name.replace('models/', '') : 'N/A');
            const displayName = m.displayName || m.name || m.id;
            const isFree = m.isFree || modelId.toLowerCase().includes('free');

            if (isFree) card.innerHTML += `<div class="absolute top-0 right-0 bg-green-500 text-white text-[9px] font-bold px-2 py-0.5 rounded-bl-lg uppercase tracking-tighter">FREE</div>`;
            
            card.innerHTML += `
                <div>
                    <div class="flex justify-between items-start mb-2">
                        <h3 class="font-bold text-slate-800 text-xs leading-tight group-hover:text-indigo-600 transition-colors truncate pr-8" title="${displayName}">${displayName}</h3>
                        <span class="text-[8px] bg-slate-100 text-slate-500 px-1.5 py-0.5 rounded font-bold uppercase shrink-0">${currentPlatform.substring(0,3)}</span>
                    </div>
                    <div class="bg-slate-50 rounded-lg p-2 border border-slate-100 mb-2 mt-1">
                        <span class="text-[9px] text-slate-400 block uppercase mb-1 font-semibold italic">Model ID:</span>
                        <div class="flex items-center justify-between gap-2">
                            <code class="text-[10px] text-indigo-700 font-mono break-all font-bold">"${modelId}"</code>
                            <button onclick="copyToClipboard('${modelId}', this)" class="copy-badge shrink-0 p-1 hover:bg-indigo-100 rounded transition-colors text-indigo-600">
                                <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg>
                            </button>
                        </div>
                    </div>
                    <div class="flex flex-wrap gap-1 mt-auto">
                        ${m.owned_by ? `<span class="text-[8px] bg-slate-100 text-slate-600 px-1 rounded">${m.owned_by}</span>` : ''}
                        ${isFree ? `<span class="text-[8px] bg-green-50 text-green-600 px-1 rounded border border-green-100 font-medium">${lang.freeBadge}</span>` : ''}
                    </div>
                </div>
            `;
            modelList.appendChild(card);
        });
    }

    function copyToClipboard(text, btn) {
        const textArea = document.createElement("textarea");
        textArea.value = text; document.body.appendChild(textArea); textArea.select();
        try {
            document.execCommand('copy');
            const originalHTML = btn.innerHTML;
            btn.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="#10b981" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>';
            setTimeout(() => { btn.innerHTML = originalHTML; }, 2000);
        } catch (err) {}
        document.body.removeChild(textArea);
    }

    function showError(msg) {
        const errorBox = document.getElementById('errorBox');
        document.getElementById('errorText').textContent = msg;
        errorBox.classList.remove('hidden');
        document.getElementById('btnTest').disabled = false;
        document.getElementById('loader').classList.add('hidden');
    }
</script>

</body>
</html>
